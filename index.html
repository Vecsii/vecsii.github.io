<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Stock Prices - Interactive Dashboard</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uplot@1.6.30/dist/uPlot.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/uplot@1.6.30/dist/uPlot.iife.min.js"></script>
</head>
<body>
    <header class="app-header">
        <h1>NVDA Stock - Interactive Dashboard</h1>
        <div class="theme-toggle">
            <label>
                <input id="themeToggle" type="checkbox" />
                Dark mode
            </label>
        </div>
    </header>

    <main class="container">
        <section class="controls">
            <div class="control-group">
                <label for="stockSelect">Stock:</label>
                <select id="stockSelect" disabled>
                    <option value="NVDA" selected>NVDA (NVIDIA)</option>
                </select>
            </div>
            <div class="control-group range-group">
                <label>Date range:</label>
                <input id="rangeStart" type="range" min="0" max="100" value="0" />
                <input id="rangeEnd" type="range" min="0" max="100" value="100" />
                <span id="rangeLabel" class="range-label"></span>
            </div>
        </section>

        <section class="kpi-grid">
            <div class="kpi-card">
                <h3>Min Price</h3>
                <span id="kpiMin">---</span>
            </div>
            <div class="kpi-card">
                <h3>Max Price</h3>
                <span id="kpiMax">---</span>
            </div>
            <div class="kpi-card">
                <h3>Avg Volume</h3>
                <span id="kpiVol">---</span>
            </div>
            <div class="kpi-card">
                <h3>Period Return</h3>
                <span id="kpiReturn">---</span>
            </div>
        </section>

        <section class="chart-card">
            <div class="chart-header">
                <h2>Price Over Time (NVDA)</h2>
            </div>
            <div id="priceChart" class="chart-container"></div>
        </section>

        <section class="chart-card">
            <div class="chart-header">
                <h2>Moving Averages (NVDA)</h2>
                <div class="inline-controls">
                    <label><input type="checkbox" id="ma20" checked /> MA 20</label>
                    <label><input type="checkbox" id="ma50" checked /> MA 50</label>
                    <label><input type="checkbox" id="ma200" checked /> MA 200</label>
                </div>
            </div>
            <div id="maChart" class="chart-container"></div>
        </section>

        <section class="chart-card">
            <div class="chart-header">
                <h2>Volume Over Time (NVDA)</h2>
            </div>
            <div id="volumeChart" class="chart-container"></div>
        </section>
    </main>

    <footer class="app-footer">
        <span>Data source: Stooq / Synthetic fallback. Demo for Project.</span>
        <button id="resetAll" class="btn btn-danger">Reset All</button>
    </footer>

    <script src="app.js"></script>
    <script>
        // Inline Theme toggle logic
        const themeToggle = document.getElementById('themeToggle');
        const persistedTheme = localStorage.getItem('theme');
        if (persistedTheme === 'dark') {
            document.documentElement.dataset.theme = 'dark';
            themeToggle.checked = true;
        }
        themeToggle.addEventListener('change', () => {
            const isDark = themeToggle.checked;
            document.documentElement.dataset.theme = isDark ? 'dark' : 'light';
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        });
    </script>
</body>
</html>
